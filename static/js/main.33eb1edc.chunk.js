(this.webpackJsonptally=this.webpackJsonptally||[]).push([[0],{53:function(e,t,n){},54:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(18),c=n.n(i),r=n(28),s=(n(53),n(54),n(37)),o=n(29),d=n(16),j=n(5),b=function(e){var t=e.brandText;return Object(j.jsxs)(o.a,{bg:"dark",variant:"dark",expand:"sm",sticky:"top",children:[Object(j.jsx)(o.a.Brand,{children:t}),Object(j.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(j.jsx)(o.a.Collapse,{id:"basic-navbar-nav",children:Object(j.jsxs)(s.a,{className:"container-fluid",onSelect:function(e){console.log("selected ".concat(e))},children:[Object(j.jsx)(s.a.Link,{href:"/tally/#/",children:"Counter"}),Object(j.jsx)(s.a.Link,{href:"/tally/#/view",children:"View"}),Object(j.jsxs)(d.a,{title:"Options",id:"basic-nav-dropdown",className:"ml-auto",children:[Object(j.jsx)(d.a.Item,{href:"/4",children:"Config 4"}),Object(j.jsx)(d.a.Item,{href:"/5",children:"Config 5"}),Object(j.jsx)(d.a.Divider,{}),Object(j.jsx)(d.a.Item,{href:"/share",children:"Share data"}),Object(j.jsx)(d.a.Item,{href:"/config",children:"Configure"}),Object(j.jsx)(d.a.Divider,{}),Object(j.jsx)(d.a.Item,{href:"https://github.com/joecullin/tally",target:"_blank",children:"About"})]})]})})]})},u=n(33),f=n(34),h=n(14),v=n(46),x=n.n(v),y=function(e){var t=e.tallyConfigs,n=e.recordTally;return Object(j.jsx)(f.a,{children:t.map((function(e){return Object(j.jsx)(h.a,{xs:"12",style:{padding:"1em 0 1em 2em"},children:Object(j.jsxs)("div",{children:[Object(j.jsx)(u.a,{onClick:function(){return n(e.id)},children:e.buttonLabel}),e.lastEvent&&Object(j.jsx)("span",{style:{paddingLeft:"1em",fontStyle:"italic"},children:"last: "+x()(e.lastEvent).fromNow()})]})},e.id)}))})},O=n(22),g=n(42),m=function(e){var t=e.event,n=e.label,a=e.style;return Object(j.jsxs)("span",{style:Object(O.a)(Object(O.a)({},a),{},{padding:".25em .5em"}),children:[new Date(t).toLocaleDateString(void 0,{hour:"numeric",minute:"numeric",day:"numeric",month:"short",year:"numeric"}),n&&Object(j.jsxs)("span",{style:{paddingLeft:".5em",fontStyle:"italic"},children:["\u2013 ",n]})]})},p={combinedTallies:!0},C=function(e){var t=e.tallyConfigs,n=e.tallyData,a=l.a.useState(Object(O.a)({},p)),i=Object(r.a)(a,2),c=i[0],s=i[1],o=function(e,t){if(!e||!t)return!0;var n=new Date(e),a=new Date(t);return n.getFullYear()!==a.getFullYear()||n.getMonth()!==a.getMonth()||n.getDate()!==a.getDate()},d=function(e){var t=[];if(e&&e.events)for(var n,a=e.events.length-1;a>=0;a--){var l=e.events[a],i=n&&o(l,n)?"solid 1px gray":"none";t.push(Object(j.jsx)(h.a,{xs:"12",style:{paddingLeft:"3em"},children:Object(j.jsx)(m,{style:{borderTop:i},event:l})},a)),n=l}return 0===t.length&&t.push(Object(j.jsx)(h.a,{xs:12,style:{paddingLeft:"3em"},children:"(no data)"})),t};return Object(j.jsxs)("div",{className:"text-left",style:{paddingLeft:"2em",paddingTop:"1em"},children:[Object(j.jsx)(g.a,{style:{paddingBottom:"1em"},children:Object(j.jsx)(g.a.Check,{type:"switch",id:"combined-view-switch",label:"Combined view",checked:c.combinedTallies,onChange:function(){return s(Object(O.a)(Object(O.a)({},c),{},{combinedTallies:!c.combinedTallies}))}})}),c.combinedTallies?function(){var e={},a=[];t.forEach((function(t){e[t.id]=t.label})),n.forEach((function(t){t.events.forEach((function(n){a.push({event:n,label:e[t.id]})}))}));var l=[];if(a){var i;a.sort((function(e,t){return e.event<t.event?-1:e.event>t.event?1:0}));for(var c=a.length-1;c>=0;c--){var r=a[c],s=i&&o(r.event,i.event)?"solid 1px gray":"none";l.push(Object(j.jsx)(h.a,{xs:"12",style:{paddingLeft:"1em"},children:Object(j.jsx)(m,{style:{borderTop:s},event:r.event,label:r.label})},c)),i=r}}return 0===l.length&&l.push(Object(j.jsx)(h.a,{xs:12,style:{paddingLeft:"1em"},children:"(no data)"})),l}():t.map((function(e){return Object(j.jsxs)(f.a,{children:[Object(j.jsx)(h.a,{xs:"12",style:{padding:".5em 0 .5em 1em",fontWeight:"bold"},children:e.label},e.id),d(n.find((function(t){return t.id===e.id})))]},e.id)}))]})},w=n(47),D=n(7),T=n(60);var S=function(){var e=function(e,t){var n=l.a.useState((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),a=Object(r.a)(n,2),i=a[0],c=a[1];return l.a.useEffect((function(){window.localStorage.setItem(t,JSON.stringify(i))}),[t,i]),[i,c]}({id:"default",displayName:"Tally",tallyConfigs:[{id:"tally1",label:"Counter #1",buttonLabel:"Count event!",lastEvent:null},{id:"tally2",label:"Counter #2",buttonLabel:"2nd Counter",lastEvent:null}],tallyData:[]},"tallyData"),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(j.jsx)(w.a,{basename:"/tally/",children:Object(j.jsxs)("div",{className:"App text-left",children:[Object(j.jsx)(b,{brandText:n.displayName}),Object(j.jsxs)(D.c,{children:[Object(j.jsx)(D.a,{path:"/view",children:Object(j.jsx)(C,{tallyConfigs:n.tallyConfigs?n.tallyConfigs:[],tallyData:n.tallyData?n.tallyData:[]})}),Object(j.jsx)(D.a,{path:"/",children:Object(j.jsx)(y,{tallyConfigs:n.tallyConfigs?n.tallyConfigs:[],recordTally:function(e){return function(e){var t=T(n),l=t.tallyConfigs.find((function(t){return t.id===e}));if(l){var i=t.tallyData.find((function(t){return t.id===e}));i||(i={id:e,events:[]},t.tallyData.push(i));var c=(new Date).toISOString();l.lastEvent=c,i.events.push(c),a(t)}else console.error("recordTally for '".concat(e,"': config not found."))}(e)}})})]})]})})};c.a.render(Object(j.jsx)(l.a.StrictMode,{children:Object(j.jsx)(S,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.33eb1edc.chunk.js.map